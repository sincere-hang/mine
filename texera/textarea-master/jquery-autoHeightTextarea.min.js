!function($){$.fn.autoHeightTextareaDefaults={rows:0,minRows:0,maxRows:null,HIDDEN_STYLE:"height:0 !important;visibility:hidden !important;overflow:hidden !important;position:absolute !important;z-index:-1000 !important;top:0 !important;right:0 !important;",CONTEXT_STYLE:["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"],calculateNodeStyling:function(targetElement){var _this=this,style=window.getComputedStyle(targetElement),boxSizing=style.getPropertyValue("box-sizing"),paddingSize=parseFloat(style.getPropertyValue("padding-bottom"))+parseFloat(style.getPropertyValue("padding-top")),borderSize=parseFloat(style.getPropertyValue("border-bottom-width"))+parseFloat(style.getPropertyValue("border-top-width")),contextStyle;return{contextStyle:this.CONTEXT_STYLE.map(function(value){return value+":"+style.getPropertyValue(value)}).join(";"),paddingSize:paddingSize,borderSize:borderSize,boxSizing:boxSizing}},mainAlgorithm:function(hiddenTextarea,textareaElement){var _this=this,{paddingSize:paddingSize,borderSize:borderSize,boxSizing:boxSizing,contextStyle:contextStyle}=this.calculateNodeStyling(textareaElement);hiddenTextarea.setAttribute("style",this.HIDDEN_STYLE+contextStyle),hiddenTextarea.value=textareaElement.value||textareaElement.placeholder||"";var height=hiddenTextarea.scrollHeight;"border-box"===boxSizing?height+=borderSize:"content-box"===boxSizing&&(height-=paddingSize),hiddenTextarea.value="";var singleRowHeight=hiddenTextarea.scrollHeight-paddingSize,minRows,dataRows=$(textareaElement).attr("rows"),dataMinRows=$(textareaElement).attr("data-min-rows");minRows=dataRows>0&&dataMinRows>0?Math.max(dataRows,dataMinRows):dataRows>0?dataRows:dataMinRows>0?dataMinRows:1;var maxRows=$(textareaElement).attr("data-max-rows")?$(textareaElement).attr("data-max-rows"):null;if(this.rows&&this.minRows?minRows=Math.max(this.rows,this.minRows,minRows):this.rows?minRows=Math.max(this.rows,minRows):this.minRows&&(minRows=Math.max(this.minRows,minRows)),this.maxRows&&null!==maxRows?maxRows=Math.min(this.maxRows,maxRows):this.maxRows&&(maxRows=this.maxRows),null!==minRows){var minHeight=singleRowHeight*minRows;"border-box"===boxSizing&&(minHeight=minHeight+paddingSize+borderSize),height=Math.max(minHeight,height)}if(null!==maxRows){var maxHeight=singleRowHeight*maxRows;"border-box"===boxSizing&&(maxHeight=maxHeight+paddingSize+borderSize),height=Math.min(maxHeight,height)}$(textareaElement).css("height",height+"px")}},$.fn.autoHeightTextarea=function(options){var options=$.extend({},$.fn.autoHeightTextareaDefaults,options);return this.each(function(index,textareaElement){var hiddenTextarea;hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea)),options.mainAlgorithm(hiddenTextarea,textareaElement),hiddenTextarea.parentNode&&hiddenTextarea.parentNode.removeChild(hiddenTextarea),hiddenTextarea=null,$(textareaElement).on("focus",function(){hiddenTextarea||(hiddenTextarea=document.createElement("textarea"),document.body.appendChild(hiddenTextarea),hiddenTextarea.setAttribute("style",options.HIDDEN_STYLE))}).on("input",function(){options.mainAlgorithm(hiddenTextarea,textareaElement)}).on("blur",function(){hiddenTextarea.parentNode&&hiddenTextarea.parentNode.removeChild(hiddenTextarea),hiddenTextarea=null})}),this}}(jQuery);